@use "sass:map";
@use "sass:meta";

////
/// Wrangle sass-mq config...
///
/// @group tools
////

// Pass our breakpoint definitions through to sass-mq.
$mq-breakpoints: if(meta.variable-exists(nhsuk-breakpoints), $nhsuk-breakpoints, ());

$mq-show-breakpoints: ();

@if meta.variable-exists(nhsuk-show-breakpoints) and $nhsuk-show-breakpoints {
  $mq-show-breakpoints: map.keys($nhsuk-breakpoints);
}

// This is a horrible, horrible hack to prevent the 'dev mode' CSS to display
// the current breakpoint from being included multiple times.
//
// We can't use the `exports` mixin for this because import directives cannot be
// used within control directives ðŸ˜ 
$sass-mq-already-included: false !default;

@if $sass-mq-already-included {
  $mq-show-breakpoints: ();
}

@import "../vendor/sass-mq";

$sass-mq-already-included: true;

/// Helpers
///
/// @link https://github.com/alphagov/govuk-frontend Original code taken from GDS (Government Digital Service)

@mixin govuk-media-query($args...) {
  @include mq($args...) {
    @content;
  }
}
